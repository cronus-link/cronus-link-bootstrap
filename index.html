<!DOCTYPE html>
<html lang="en">

<head>
  <script>
    if (window.location.host != "localhost" && window.location.protocol === "https:" && window.location.hash.indexOf("allowHTTPS") === -1) window.location.href = window.location.href.replace("https:", "http:");
  </script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, user-scalable=no" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>Cronus Link</title>
  <meta http-equiv="theme-color" content="#ffffff" />
  <link rel="shortcut icon" href="logo.ico" type="image/x-icon" />
  <style>
    body {
      position: relative;
      font-family: Arial, Helvetica, sans-serif;
      user-select: none;
    }

    #loadingMessage {
      text-align: center;
      padding: 40px;
      background-color: #eee;
    }

    #canvas {
      width: 100%;
    }

    #output {
      margin-top: 20px;
      background: #eee;
      padding: 10px;
      padding-bottom: 0;
    }

    #output div {
      padding-bottom: 10px;
      word-wrap: break-word;
    }

    #noQRFound {
      text-align: center;
    }

    #bootstrap-screens {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: white;
      overflow: auto;
    }

    .screen {
      max-width: 640px;
      display: none;
    }

    #qrStart {
      background: black;
      color: white;
      display: block;
      padding: 20px;
    }

    #bootstrap.done {
      display: none;
    }

    #bootstrap-screens[data-screen="qr"] .screen.qr {
      display: block;
    }

    #bootstrap-screens[data-screen="loading"] .screen.loading {
      display: block;
    }

    #bootstrap-screens[data-screen="invalid"] .screen.qr {
      invalidsplay: block;
    }

    #bootstrap-screens[data-screen="cantconnect"] .screen.cantconnect {
      display: block;
    }
  </style>
  <script src="./jsQR.js"></script>
</head>

<body>
  <div id="app"></div>
  <div id="bootstrap">
    <div id="bootstrap-screens">

      <div class="screen qr">
        <div id="qr">
          <div id="loadingMessage">
            <p>This device is not currently linked to a PC. Please start the QR scanner below with the QR code generated on your PC's Cronus Link app.</p>
            <div id="qrStart">Scan QR Code</div>
          </div>
          <canvas id="canvas" hidden></canvas>
          <div id="output" hidden>
            <div id="outputMessage">No QR code detected.</div>
            <div hidden><b>QR code detected</b> <span style="display:none" id="outputData"></span></div>
          </div>
        </div>
      </div>

      <div class="screen loading">
        Loading...
      </div>

      <div class="screen cantconnect">
        Couldn't connect
        <div class="bootstrap-qrScreen">Go to QR</div>
      </div>

      <div class="screen invalid">
        Invalid or expired session
        <div class="bootstrap-qrScreen">Go to QR</div>
      </div>


    </div>

  </div>
  <script type="module" src="bootstrap.js"></script>
  <link
    href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:ital,wght@0,400;0,500;0,700;0,900;1,400;1,500;1,700;1,900&display=swap"
    rel="stylesheet">
</body>

</html>